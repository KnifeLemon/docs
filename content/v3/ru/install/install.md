# Инструкции по установке

Есть некоторые базовые предварительные требования перед тем, как вы сможете установить Flight. В частности, вам потребуется:

1. [Установить PHP на вашу систему](#установка-php)
2. [Установить Composer](https://getcomposer.org) для наилучшего опыта разработчика.

## Базовая установка

Если вы используете [Composer](https://getcomposer.org), вы можете выполнить следующую
команду:

```bash
composer require flightphp/core
```

Это разместит только основные файлы Flight на вашей системе. Вам нужно будет определить структуру проекта, [макет](/learn/templates), [зависимости](/learn/dependency-injection-container), [конфигурации](/learn/configuration), [автозагрузку](/learn/autoloading) и т.д. Этот метод гарантирует, что не будут установлены другие зависимости, кроме Flight.

Вы также можете [скачать файлы](https://github.com/flightphp/core/archive/master.zip)
 напрямую и извлечь их в вашу веб-директорию.

## Рекомендуемая установка

Настоятельно рекомендуется начинать с приложения [flightphp/skeleton](https://github.com/flightphp/skeleton) для любых новых проектов. Установка очень простая.

```bash
composer create-project flightphp/skeleton my-project/
```

Это настроит структуру вашего проекта, настроит автозагрузку с пространствами имен, настроит конфигурацию и предоставит другие инструменты, такие как [Tracy](/awesome-plugins/tracy), [Расширения Tracy](/awesome-plugins/tracy-extensions) и [Runway](/awesome-plugins/runway).

## Настройка вашего веб-сервера

### Встроенный сервер разработки PHP

Это, безусловно, самый простой способ запустить и запустить. Вы можете использовать встроенный сервер для запуска вашего приложения и даже использовать SQLite для базы данных (при условии, что sqlite3 установлен на вашей системе) и не требовать ничего особенного! Просто выполните следующую команду после установки PHP:

```bash
php -S localhost:8000
# или с приложением skeleton
composer start
```

Затем откройте браузер и перейдите на `http://localhost:8000`.

Если вы хотите сделать корневую директорию документа вашего проекта другой директорией (Например: ваш проект — `~/myproject`, но корневая директория документа — `~/myproject/public/`), вы можете выполнить следующую команду, находясь в директории `~/myproject`:

```bash
php -S localhost:8000 -t public/
# с приложением skeleton это уже настроено
composer start
```

Затем откройте браузер и перейдите на `http://localhost:8000`.

### Apache

Убедитесь, что Apache уже установлен на вашей системе. Если нет, погуглите, как установить Apache на вашу систему.

Для Apache отредактируйте ваш файл `.htaccess` со следующим содержимым:

```apacheconf
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]
```

> **Примечание**: Если вам нужно использовать flight в поддиректории, добавьте строку
> `RewriteBase /subdir/` сразу после `RewriteEngine On`.

> **Примечание**: Если вы хотите защитить все файлы сервера, такие как файл базы данных или env.
> Поместите это в ваш файл `.htaccess`:

```apacheconf
RewriteEngine On
RewriteRule ^(.*)$ index.php
```

### Nginx

Убедитесь, что Nginx уже установлен на вашей системе. Если нет, погуглите, как установить Nginx на вашу систему.

Для Nginx добавьте следующее в вашу декларацию сервера:

```nginx
server {
  location / {
    try_files $uri $uri/ /index.php;
  }
}
```

## Создание вашего файла `index.php`

Если вы выполняете базовую установку, вам понадобится некоторый код, чтобы начать.

```php
<?php

// Если вы используете Composer, подключите автозагрузчик.
// require 'vendor/autoload.php';
// если вы не используете Composer, загрузите фреймворк напрямую
// require 'flight/Flight.php';

// Затем определите маршрут и назначьте функцию для обработки запроса.
Flight::route('/', function () {
  echo 'hello world!';
});

// Наконец, запустите фреймворк.
Flight::start();
```

С приложением skeleton это уже настроено и обрабатывается в вашем файле `app/config/routes.php`. Службы настроены в `app/config/services.php`.

## Установка PHP

Если у вас уже установлен `php` на вашей системе, переходите к [разделу загрузки](#скачать-файлы) и пропустите эти инструкции.

### **macOS**

#### **Установка PHP с помощью Homebrew**

1. **Установите Homebrew** (если еще не установлен):
   - Откройте Терминал и выполните:
     ```bash
     /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
     ```

2. **Установите PHP**:
   - Установите последнюю версию:
     ```bash
     brew install php
     ```
   - Чтобы установить конкретную версию, например, PHP 8.1:
     ```bash
     brew tap shivammathur/php
     brew install shivammathur/php/php@8.1
     ```

3. **Переключайтесь между версиями PHP**:
   - Отсоедините текущую версию и подключите желаемую:
     ```bash
     brew unlink php
     brew link --overwrite --force php@8.1
     ```
   - Проверьте установленную версию:
     ```bash
     php -v
     ```

### **Windows 10/11**

#### **Ручная установка PHP**

1. **Скачайте PHP**:
   - Посетите [PHP для Windows](https://windows.php.net/download/) и скачайте последнюю или конкретную версию (например, 7.4, 8.0) в виде zip-файла, не требующего потокобезопасности.

2. **Извлеките PHP**:
   - Извлеките скачанный zip-файл в `C:\php`.

3. **Добавьте PHP в системный PATH**:
   - Перейдите в **Свойства системы** > **Переменные среды**.
   - В разделе **Системные переменные** найдите **Path** и нажмите **Изменить**.
   - Добавьте путь `C:\php` (или куда вы извлекли PHP).
   - Нажмите **OK**, чтобы закрыть все окна.

4. **Настройте PHP**:
   - Скопируйте `php.ini-development` в `php.ini`.
   - Отредактируйте `php.ini` для настройки PHP по необходимости (например, установка `extension_dir`, включение расширений).

5. **Проверьте установку PHP**:
   - Откройте Командную строку и выполните:
     ```cmd
     php -v
     ```

#### **Установка нескольких версий PHP**

1. **Повторите указанные выше шаги** для каждой версии, размещая каждую в отдельной директории (например, `C:\php7`, `C:\php8`).

2. **Переключайтесь между версиями**, регулируя системную переменную PATH, чтобы указать на директорию желаемой версии.

### **Ubuntu (20.04, 22.04 и т.д.)**

#### **Установка PHP с помощью apt**

1. **Обновите списки пакетов**:
   - Откройте Терминал и выполните:
     ```bash
     sudo apt update
     ```

2. **Установите PHP**:
   - Установите последнюю версию PHP:
     ```bash
     sudo apt install php
     ```
   - Чтобы установить конкретную версию, например, PHP 8.1:
     ```bash
     sudo apt install php8.1
     ```

3. **Установите дополнительные модули** (опционально):
   - Например, для установки поддержки MySQL:
     ```bash
     sudo apt install php8.1-mysql
     ```

4. **Переключайтесь между версиями PHP**:
   - Используйте `update-alternatives`:
     ```bash
     sudo update-alternatives --set php /usr/bin/php8.1
     ```

5. **Проверьте установленную версию**:
   - Выполните:
     ```bash
     php -v
     ```

### **Rocky Linux**

#### **Установка PHP с помощью yum/dnf**

1. **Включите репозиторий EPEL**:
   - Откройте Терминал и выполните:
     ```bash
     sudo dnf install epel-release
     ```

2. **Установите репозиторий Remi's**:
   - Выполните:
     ```bash
     sudo dnf install https://rpms.remirepo.net/enterprise/remi-release-8.rpm
     sudo dnf module reset php
     ```

3. **Установите PHP**:
   - Чтобы установить версию по умолчанию:
     ```bash
     sudo dnf install php
     ```
   - Чтобы установить конкретную версию, например, PHP 7.4:
     ```bash
     sudo dnf module install php:remi-7.4
     ```

4. **Переключайтесь между версиями PHP**:
   - Используйте команду модуля `dnf`:
     ```bash
     sudo dnf module reset php
     sudo dnf module enable php:remi-8.0
     sudo dnf install php
     ```

5. **Проверьте установленную версию**:
   - Выполните:
     ```bash
     php -v
     ```

### **Общие замечания**

- Для сред разработки важно настроить параметры PHP в соответствии с требованиями вашего проекта. 
- При переключении версий PHP убедитесь, что все соответствующие расширения PHP установлены для конкретной версии, которую вы планируете использовать.
- Перезапустите ваш веб-сервер (Apache, Nginx и т.д.) после переключения версий PHP или обновления конфигураций, чтобы применить изменения.