# 为什么使用框架？

一些程序员强烈反对使用框架。他们认为框架臃肿、缓慢且难以学习。他们说框架是不必要的，你可以不用框架写出更好的代码。关于使用框架的缺点可以提出一些有效观点。然而，使用框架也有很多优点。

## 使用框架的理由

以下是您可能考虑使用框架的一些理由：

- **快速开发**：框架提供了大量开箱即用的功能。这意味着您可以更快地构建 Web 应用程序。您不必编写太多代码，因为框架提供了许多您需要的功能。
- **一致性**：框架提供了一种一致的做事方式。这使您更容易理解代码的工作原理，也使其他开发人员更容易理解您的代码。如果您逐个脚本编写，您可能会在脚本之间失去一致性，尤其是如果您正在与开发团队一起工作。
- **安全性**：框架提供安全功能，帮助保护您的 Web 应用程序免受常见的安全威胁。这意味着您无需过多担心安全性，因为框架会为您处理许多安全性问题。
- **社区**：框架拥有大量的开发人员社区，他们为框架做出贡献。这意味着当您有问题或困难时，您可以从其他开发人员那里获得帮助。这也意味着有许多资源可帮助您学习如何使用框架。
- **最佳实践**：框架是使用最佳实践构建的。这意味着您可以从框架中学习并在自己的代码中使用相同的最佳实践。这可以帮助您成为更好的程序员。有时候你不知道自己不知道的东西会让你后悔。
- **可扩展性**：框架旨在进行扩展。这意味着您可以向框架添加自己的功能。这使您能够构建根据自己特定需求定制的 Web 应用程序。

Flight 是一个微型框架。这意味着它很小且轻量级。它提供的功能不如 Laravel 或 Symfony 等较大的框架多。但是，它确实提供了构建 Web 应用程序所需的许多功能。而且，它易于学习和使用。这使它成为快速轻松构建 Web 应用程序的良好选择。如果您是框架新手，Flight 是一个很棒的入门框架。它将帮助您了解使用框架的优势，而不会让您陷入复杂性之中。在您对 Flight 有一些经验之后，更容易转向像 Laravel 或 Symfony 这样更复杂的框架，然而 Flight 仍然可以构建成功的强大应用程序。

## 什么是路由？

路由是 Flight 框架的核心，但它究竟是什么呢？路由是将 URL 与代码中的特定函数匹配的过程。这是您可以根据请求的 URL 让您的网站执行不同操作的方式。例如，您可能希望当用户访问 `/user/1234` 时显示用户个人资料，而当他们访问 `/users` 时显示所有用户列表。这一切都是通过路由完成的。

可能会像这样运作：

- 用户打开浏览器并输入 `http://example.com/user/1234`。
- 服务器收到请求并查看 URL，然后将其传递给 Flight 应用程序代码。
- 假设您的 Flight 代码中有类似这样的内容 `Flight::route('/user/@id', [ 'UserController', 'viewUserProfile' ]);`。Flight 应用程序代码查看 URL 并看到它匹配您定义的路由，然后运行您为该路由定义的代码。
- 然后 Flight 路由器将运行并调用 `UserController` 类中的 `viewUserProfile($id)` 方法，在方法中传入 `1234` 作为 `$id` 参数。
- 您的 `viewUserProfile()` 方法中的代码将运行并执行您告诉它要执行的操作。您可能会输出一些 HTML 用于用户个人资料页面，或者如果这是一个 RESTful API，您可能会输出包含用户信息的 JSON 响应。
- Flight 将这些内容打包好，生成响应标头并发送回用户的浏览器。
- 用户感到愉悦并给自己一个温暖的拥抱！

### 为什么它重要？

拥有一个适当的集中化路由器实际上可以使您的生活变得更加轻松！起初可能有点难以理解。以下是一些原因：

- **集中化的路由**: 您可以将所有路由保存在一个地方。这使得您更容易看到您拥有的路由以及它们的功能。如果需要，也使得更容易进行更改。
- **路由参数**: 您可以使用路线参数将数据传递给您的路线方法。这是保持代码整洁和有条理的好方法。
- **路由组**: 您可以将路由组合在一起。这对于保持代码组织良好以及将 [middleware](middleware) 应用于一组路由非常有用。
- **路由别名**: 您可以为路由分配别名，以便稍后在您的代码中动态生成 URL（例如模板）。例如：您可以在代码中引用别名 `user_view` 并传入 `id` 作为参数，而不是在代码中编写 `/user/1234`。如果以后决定将其更改为  `/admin/user/1234`，您不必更改所有硬编码的 URL，只需更改与路由关联的 URL。
- **路由中间件**: 您可以向您的路由中添加中间件。中间件非常强大，可以为您的应用程序添加特定的行为，例如验证某个用户是否能够访问某个路由或一组路由。

我相信您对逐个脚本的方式创建网站很熟悉。您可能有一个名为 `index.php` 的文件，其中包含许多 `if` 语句来检查 URL，然后根据 URL 运行特定的函数。这是一种路由的形式，但不够有组织性，很快就会失控。Flight 的路由系统是处理路由的一种组织良好且功能强大的方式。

这样？

```php

// /user/view_profile.php?id=1234
if ($_GET['id']) {
	$id = $_GET['id'];
	viewUserProfile($id);
}

// /user/edit_profile.php?id=1234
if ($_GET['id']) {
	$id = $_GET['id'];
	editUserProfile($id);
}

// 等等...
```

抑或是这样?

```php

// index.php
Flight::route('/user/@id', [ 'UserController', 'viewUserProfile' ]);
Flight::route('/user/@id/edit', [ 'UserController', 'editUserProfile' ]);

// 在您的 app/controllers/UserController.php 中
class UserController {
	public function viewUserProfile($id) {
		// 做一些事情
	}

	public function editUserProfile($id) {
		// 做一些事情
	}
}
```

希望您现在能够看到使用集中化路由系统的好处。长远来看，这更容易管理和理解！

## 请求和响应

Flight 提供了处理请求和响应的简单易用方式。这是 Web 框架的核心功能。它接收来自用户浏览器的请求，处理它，然后发送回响应。这是您可以构建能够执行诸如显示用户个人资料、让用户登录或让用户发布新博客文章等操作的 Web 应用程序的方式。

### 请求

当用户访问您的网站时，请求是用户的浏览器发送到服务器的内容。此请求包含关于用户想要执行的操作的信息。例如，它可能包含用户想要访问的 URL、用户想要发送到您的服务器的数据或用户希望从您的服务器接收的数据类型。需要知道的是请求是只读的。您无法更改请求，但可以从中读取。

Flight 提供了一个简单的方法来访问有关请求的信息。您可以使用 `Flight::request()` 方法访问有关请求的信息。该方法返回一个包含有关请求信息的 `Request` 对象。您可以使用此对象访问与请求相关的信息，例如 URL、方法或用户发送到您的服务器的数据。

### 响应

当用户访问您的网站时，服务器返回给用户浏览器的内容为响应。此响应包含有关您的服务器要执行的操作的信息。例如，它可能包含有关您的服务器希望发送给用户的数据类型、您的服务器希望从用户接收的数据类型或您的服务器希望在用户计算机上存储的数据类型。

Flight 提供了一种简单的方法将响应发送回用户的浏览器。您可以使用 `Flight::response()` 方法发送响应。此方法接受一个 `Response` 对象作为参数，并将响应发送到用户的浏览器。您可以使用此对象向用户的浏览器发送响应，例如 HTML、JSON 或文件。Flight 可帮助您自动生成响应的某些部分，使事情变得简单，但最终您可以控制发送给用户的内容。

