# フレームワークの理由

プログラマーの中には、フレームワークの使用に強く反対する人もいます。フレームワークは過剰で遅く、学びにくいと主張する人もいます。彼らは、フレームワークは不要であり、それらなしでより優れたコードを書くことができると言います。フレームワークの利点については確かにいくつかの有効なポイントがあります。ただし、フレームワークを使用する利点も多く存在します。

## フレームワークを使用する理由

次に、フレームワークを使用する理由のいくつかを示します：

- **迅速な開発**：フレームワークには多くの機能が最初から提供されます。これにより、ウェブアプリケーションをより迅速に構築することができます。必要な機能の多くをフレームワークが提供しているため、多くのコードを書く必要がありません。
- **一貫性**：フレームワークは作業方法の一貫した方法を提供します。これにより、コードの動作方法を理解しやすくなり、他の開発者がコードを理解しやすくなります。スクリプト単位で開発すると、スクリプト間で一貫性が失われる可能性があります、特に開発チームで作業している場合。
- **セキュリティ**：フレームワークには、一般的なセキュリティ脅威からウェブアプリケーションを保護するのに役立つセキュリティ機能が提供されます。フレームワークが多くのセキュリティを処理しているので、セキュリティを心配する必要が少なくなります。
- **コミュニティ**：フレームワークには、フレームワークに貢献する多くの開発者のコミュニティがあります。これにより、疑問や問題があるときに他の開発者から支援を受けることができます。また、フレームワークの使用方法を学ぶのに利用できるリソースが豊富であることも意味します。
- **ベストプラクティス**：フレームワークはベストプラクティスを使用して構築されています。これにより、フレームワークから学び、自分自身のコードで同じベストプラクティスを使用できます。これにより、より優れたプログラマーになるのに役立ちます。時には自身が何を知らないか分からないことがあり、それが最後に後悔を招く可能性があります。
- **拡張性**：フレームワークは拡張可能に設計されています。これにより、フレームワークに独自の機能を追加することができます。これにより、特定のニーズに合わせたウェブアプリケーションを構築することができます。

Flightはマイクロフレームワークです。これは小さく軽量であることを意味します。LaravelやSymfonyのような大規模なフレームワークほど多くの機能を提供していません。しかし、ウェブアプリケーションを構築するために必要な機能の多くを提供しています。また、学習や使用が簡単です。これは、ウェブアプリケーションを迅速かつ簡単に構築するための適切な選択肢です。フレームワークに初めて取り組む場合、Flightは初心者向けの素晴らしいフレームワークです。これにより、フレームワークの利点を学びながら、複雑すぎることなく十分な経験を積むことができます。Flightの経験があると、後にLaravelやSymfonyなどのより複雑なフレームワークに移行しやすくなりますが、Flightでも成功した堅牢なアプリケーションを作成できます。

## ルーティングとは？

ルーティングはFlightフレームワークの中心ですが、それは具体的に何でしょうか？ルーティングとは、URLを取り、そのURLに基づいて特定の関数と一致させるプロセスです。これにより、ユーザーがリクエストしたURLに基づいてウェブサイトに異なる作業をさせることができます。例えば、ユーザーが`/user/1234`を訪れたときにはユーザーのプロフィールを表示したいかもしれませんし、`/users`を訪れた場合には全ユーザーのリストを表示したいかもしれません。これはすべてルーティングを介して行われます。

以下のように機能するかもしれません：

- ユーザーがブラウザにアクセスして`http://example.com/user/1234`と入力します。
- サーバーがリクエストを受け取り、URLをチェックしてFlightアプリケーションコードに渡します。
- 例えば、Flightのコードに`Flight::route('/user/@id', [ 'UserController', 'viewUserProfile' ]);`のようなものがあるとします。FlightアプリケーションコードはURLを確認し、定義されたルートに一致することを見て、そのルートに対して定義されたコードを実行します。
- 次に、Flightのルーターが実行され、`UserController`クラス内の`viewUserProfile($id)`メソッドを呼び出し、メソッド内の`$id`引数として`1234`を渡します。
- `viewUserProfile()`メソッド内のコードが実行され、指定した動作が実行されます。ユーザーのプロフィールページのHTMLを出力したり、RESTful APIの場合はユーザー情報を含むJSON応答を出力したりするかもしれません。
- Flightはこれらを整理し、応答ヘッダーを生成し、ユーザーのブラウザに送り返します。
- ユーザーは喜びに満たされ、自分に暖かく抱擁します！

### なぜ重要なのか？

適切な中央集約型のルーターを持つと、実際にはあなたの生活を著しく楽にすることができます！最初はそれが見えにくいかもしれませんが、次の理由があります：

- **中央集約型ルーティング**：すべてのルートを1か所に保持することができます。これにより、持っているルートとその役割をより簡単に確認できます。また、必要に応じて変更する際も簡単に変更できます。
- **ルートパラメーター**：ルートパラメーターを使用してデータをルートメソッドに渡すことができます。これはコードをきれいで整理されている状態に保つ素晴らしい方法です。
- **ルートグループ**：ルートをグループ化することができます。これはコードを整理し、ルートグループに[ミドルウェア]（middleware）を適用するのに適しています。
- **ルートエイリアス**：ルートにエイリアスを割り当てることができ、後でコード内でURLを動的に生成することができます（たとえば、テンプレートなど）。例：コード内に`/user/1234`をハードコードする代わりに、`user_view`にエイリアスを割り当て、`id`をパラメーターとして渡すことができます。後で`/admin/user/1234`に変更することに決めた場合でも、すべてのハードコードされたURLを変更する必要はありません。
- **ルートミドルウェア**：ルートにミドルウェアを追加できます。ミドルウェアは、特定のユーザーがルートまたはルートグループにアクセスできるかどうかを認証するなど、アプリケーションに特定の動作を追加するのに非常に強力です。

おそらく、ウェブサイトを作成するときのスクリプト単位の方法についてはご存知かもしれません。たとえば、`index.php`というファイルがあり、URLを確認して特定の関数を実行するための`if`ステートメントがいくつか含まれているかもしれません。これはルーティングの形態ですが、整理されておらず、すぐに手に負えなくなる可能性があります。Flightのルーティングシステムは、ルーティングを処理するより整理されたかつ強力な方法です。

これ？

```php

// /user/view_profile.php?id=1234
if ($_GET['id']) {
	$id = $_GET['id'];
	viewUserProfile($id);
}

// /user/edit_profile.php?id=1234
if ($_GET['id']) {
	$id = $_GET['id'];
	editUserProfile($id);
}

// etc...
```

またはこれ？

```php

// index.php
Flight::route('/user/@id', [ 'UserController', 'viewUserProfile' ]);
Flight::route('/user/@id/edit', [ 'UserController', 'editUserProfile' ]);

// Maybe in your app/controllers/UserController.php
class UserController {
	public function viewUserProfile($id) {
		// do something
	}

	public function editUserProfile($id) {
		// do something
	}
}
```

中央集約型のルーティングシステムを使用するメリットが徐々に見えてくるといいですね。結局、将来的に何を返すかを制御しますが、管理しやすく、理解しやすいです！

## リクエストとレスポンス

Flightはリクエストとレスポンスを処理する簡単かつコンパクトな方法を提供します。これがウェブフレームワークの中心部分です。ユーザーのブラウザからのリクエストを受け取り、処理し、応答を返すことにより、ユーザーのプロフィールを表示したり、ユーザーのログインを許可したり、ユーザーが新しいブログ投稿を行ったりするようなウェブアプリケーションを構築できます。

### リクエスト

リクエストは、ユーザーのブラウザがあなたのウェブサイトを訪れたときにサーバーに送信するものです。このリクエストには、ユーザーが行いたいことに関する情報が含まれます。たとえば、ユーザーが訪れたいURLに関する情報、ユーザーがサーバーに送信したいデータ、サーバーからユーザーに受け取りたいデータの種類などが含まれる場合があります。重要なのは、リクエストは読み取り専用であるということです。リクエストを変更することはできませんが、読み取ることはできます。

Flightはリクエストに関する情報にアクセスする簡単な方法を提供します。`Flight::request()`メソッドを使用してリクエストに関する情報にアクセスできます。このメソッドはリクエストに関する情報を含む`Request`オブジェクトを返します。このオブジェクトを使用して、URL、メソッド、またはユーザーがサーバーに送信したデータなど、リクエストに関する情報にアクセスできます。

### レスポンス

レスポンスは、ユーザーのブラウザがウェブサイトを訪れたときにサーバーがユーザーのブラウザに送り返すものです。このレスポンスには、サーバーが行いたいことに関する情報が含まれます。たとえば、サーバーがユーザーに送りたいデータの種類、ユーザーから受け取りたいデータの種類、またはサーバーがユーザーのコンピュータに保存したいデータの種類などが含まれる場合があります。

Flightはユーザーのブラウザに対してレスポンスを送信する簡単な方法を提供します。`Flight::response()`メソッドを使用してレスポンスを送信できます。このメソッドは`Response`オブジェクトを引数として受け取り、そのレスポンスをユーザーのブラウザに送信します。このオブジェクトを使用して、HTML、JSON、またはファイルなど、ユーザーのブラウザにレスポンスを送信できます。Flightはレスポンスを簡単に生成するのに役立ちますが、最終的にはユーザーに返すデータについて制御を持っています。