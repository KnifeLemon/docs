# Установка

## Загрузка файлов

Убедитесь, что у вас установлен PHP на вашей системе. Если нет, нажмите [здесь](#установка-php) для получения инструкций по установке на вашей системе.

Если вы используете [Composer](https://getcomposer.org), вы можете выполнить следующую команду:

```bash
composer require flightphp/core
```

ИЛИ вы можете [скачать файлы](https://github.com/flightphp/core/archive/master.zip) напрямую и извлечь их в ваш каталог веб-сайта.

## Настройка вашего веб-сервера

### Встроенный веб-сервер PHP

Это, безусловно, самый простой способ запустить приложение и использовать даже SQLite для базы данных. Просто выполните следующую команду после установки PHP:

```bash
php -S localhost:8000
```

Затем откройте свой браузер и перейдите по адресу `http://localhost:8000`.

Если вы хотите изменить корневой каталог вашего проекта на другой каталог (например, ваш проект - `~/myproject`, а корневой каталог -`~/myproject/public/`), вы можете выполнить следующую команду после того, как вы находитесь в каталоге `~/myproject`:

```bash
php -S localhost:8000 -t public/
```

Затем откройте свой браузер и перейдите по адресу `http://localhost:8000`.

### Apache

Убедитесь, что Apache уже установлен на вашей системе. Если нет, найдите, как установить Apache на вашей системе через поиск в Google.

Для Apache измените ваш файл `.htaccess` следующим образом:

```apacheconf
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]
```

> **Примечание**: Если вам нужно использовать flight в подкаталоге, добавьте строку
> `RewriteBase /subdir/` сразу после `RewriteEngine On`.

> **Примечание**: Если вы хотите защитить все файлы сервера, такие как файл db или env.
> Поместите это в ваш файл `.htaccess`:

```apacheconf
RewriteEngine On
RewriteRule ^(.*)$ index.php
```

### Nginx

Убедитесь, что Nginx уже установлен на вашей системе. Если нет, найдите, как установить Nginx на вашей системе через поиск в Google.

Для Nginx добавьте следующее в ваше объявление сервера:

```nginx
server {
  location / {
    try_files $uri $uri/ /index.php;
  }
}
```

## Создание вашего файла `index.php`

```php
<?php

// Если вы используете Composer, подключите автозагрузчик.
require 'vendor/autoload.php';
// если вы не используете Composer, загрузите фреймворк непосредственно
// require 'flight/Flight.php';

// Затем определите маршрут и назначьте функцию для обработки запроса.
Flight::route('/', function () {
  echo 'hello world!';
});

// Наконец, запустите фреймворк.
Flight::start();
```

## Установка PHP

Если у вас уже установлен `php` на вашей системе, переходите к [разделу загрузки файлов](#загрузка-файлов).

Успехов! Вот инструкции по установке PHP на macOS, Windows 10/11, Ubuntu и Rocky Linux. Я также предоставлю информацию о том, как установить различные версии PHP.

### **macOS**

#### **Установка PHP с помощью Homebrew**

1. **Установите Homebrew** (если его нет):
   - Откройте терминал и выполните:
     ```bash
     /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
     ```

2. **Установите PHP**:
   - Установите последнюю версию:
     ```bash
     brew install php
     ```
   - Чтобы установить конкретную версию, например, PHP 8.1:
     ```bash
     brew tap shivammathur/php
     brew install shivammathur/php/php@8.1
     ```

3. **Переключение между версиями PHP**:
   - Отсоедините текущую версию и привяжите желаемую версию:
     ```bash
     brew unlink php
     brew link --overwrite --force php@8.1
     ```
   - Проверьте установленную версию:
     ```bash
     php -v
     ```

### **Windows 10/11**

#### **Установка PHP вручную**

1. **Скачайте PHP**:
   - Перейдите на [PHP для Windows](https://windows.php.net/download/) и загрузите последнюю или конкретную версию (например, 7.4, 8.0) как zip-архив без поддержки потоков.

2. **Разархивируйте PHP**:
   - Разархивируйте загруженный zip-файл в `C:\php`.

3. **Добавьте PHP в системный путь**:
   - Перейдите в **Свойства системы** > **Переменные среды**.
   - В разделе **Системные переменные** найдите **Path** и нажмите **Изменить**.
   - Добавьте путь `C:\php` (или куда бы вы не разархивировали PHP).
   - Нажмите **OK**, чтобы закрыть все окна.

4. **Настройте PHP**:
   - Скопируйте `php.ini-development` в `php.ini`.
   - Отредактируйте `php.ini` для настройки PHP по необходимости (например, установка `extension_dir`, включение расширений).

5. **Проверьте установку PHP**:
   - Откройте командную строку и выполните:
     ```cmd
     php -v
     ```

#### **Установка нескольких версий PHP**

1. **Повторите вышеперечисленные шаги** для каждой версии, помещая каждую в отдельный каталог (например, `C:\php7`, `C:\php8`).

2. **Переключайтесь между версиями**, изменяя системную переменную PATH, указывающую на каталог нужной версии.

### **Ubuntu (20.04, 22.04 и др.)**

#### **Установка PHP с помощью apt**

1. **Обновите списки пакетов**:
   - Откройте терминал и выполните:
     ```bash
     sudo apt update
     ```

2. **Установите PHP**:
   - Установите последнюю версию PHP:
     ```bash
     sudo apt install php
     ```
   - Чтобы установить конкретную версию, например, PHP 8.1:
     ```bash
     sudo apt install php8.1
     ```

3. **Установите дополнительные модули** (по желанию):
   - Например, для установки поддержки MySQL:
     ```bash
     sudo apt install php8.1-mysql
     ```

4. **Переключение между версиями PHP**:
   - Используйте `update-alternatives`:
     ```bash
     sudo update-alternatives --set php /usr/bin/php8.1
     ```

5. **Проверьте установленную версию**:
   - Выполните:
     ```bash
     php -v
     ```

### **Rocky Linux**

#### **Установка PHP с помощью yum/dnf**

1. **Включите репозиторий EPEL**:
   - Откройте терминал и выполните:
     ```bash
     sudo dnf install epel-release
     ```

2. **Установите репозиторий Remi**:
   - Выполните:
     ```bash
     sudo dnf install https://rpms.remirepo.net/enterprise/remi-release-8.rpm
     sudo dnf module reset php
     ```

3. **Установите PHP**:
   - Чтобы установить версию по умолчанию:
     ```bash
     sudo dnf install php
     ```
   - Чтобы установить конкретную версию, например, PHP 7.4:
     ```bash
     sudo dnf module install php:remi-7.4
     ```

4. **Переключение между версиями PHP**:
   - Используйте команду `dnf module`:
     ```bash
     sudo dnf module reset php
     sudo dnf module enable php:remi-8.0
     sudo dnf install php
     ```

5. **Проверьте установленную версию**:
   - Выполните:
     ```bash
     php -v
     ```

### **Общие заметки**

- Для сред разработки важно настроить параметры PHP в соответствии с требованиями вашего проекта.
- При переключении версий PHP убедитесь, что все необходимые расширения PHP установлены для конкретной версии, которую вы собираетесь использовать.
- Перезапустите ваш веб-сервер (Apache, Nginx и т. д.) после смены версий PHP или обновления конфигураций, чтобы применить изменения.