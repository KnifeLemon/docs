# Автозагрузка

Автозагрузка - это концепция в PHP, где вы указываете каталог или каталоги для загрузки классов. Это намного более выгодно, чем использование `require` или `include` для загрузки классов. Это также требование для использования пакетов Composer.

По умолчанию любой класс `Flight` автоматически загружается благодаря composer. Однако, если вы хотите загружать свои собственные классы, вы можете использовать метод `Flight::path()` для указания каталога для загрузки классов.

## Основной пример

Допустим, у нас есть древо каталогов, похожее на следующее:

```text
# Пример пути
/home/user/project/my-flight-project/
├── app
│   ├── cache
│   ├── config
│   ├── controllers - содержит контроллеры для этого проекта
│   ├── translations
│   ├── UTILS - содержит классы только для этого приложения (это все заглавные буквы специально для примера позже)
│   └── views
└── public
    └── css
	└── js
	└── index.php
```

Вы могли заметить, что это та же структура файлов, что и на этом сайте документации.

Вы можете указать каждый каталог для загрузки вот так:

```php

/**
 * public/index.php
 */

// Добавить путь к автозагрузчику
Flight::path(__DIR__.'/../app/controllers/');
Flight::path(__DIR__.'/../app/utils/');


/**
 * app/controllers/MyController.php
 */

// не требуется использование пространства имен

// Рекомендуется, чтобы все загружаемые классы были в стиле Pascal (каждое слово с заглавной буквы, без пробелов)
// Начиная с версии 3.7.2, вы можете использовать Pascal_Snake_Case для имен ваших классов, запустив Loader::setV2ClassLoading(false);
class MyController {

	public function index() {
		// сделать что-то
	}
}
```

## Пространства имен

Если у вас есть пространства имен, на самом деле становится очень легко это реализовать. Вы должны использовать метод `Flight::path()` для указания корневого каталога (не корневого документа или папки `public/`) вашего приложения.

```php

/**
 * public/index.php
 */

// Добавить путь к автозагрузчику
Flight::path(__DIR__.'/../');
```

Теперь вот как может выглядеть ваш контроллер. Посмотрите на пример ниже, но обратите внимание на комментарии для важной информации.

```php
/**
 * app/controllers/MyController.php
 */

// пространства имен обязательны
// пространства имен такие же, как структура каталогов
// пространства имен должны следовать тому же регистру, что и структура каталогов
// пространства и каталоги не могут иметь нижние подчеркивания (если не установлено Loader::setV2ClassLoading(false))
namespace app\controllers;

// Рекомендуется, чтобы все загружаемые классы были в стиле Pascal (каждое слово с заглавной буквы, без пробелов)
// Начиная с версии 3.7.2, вы можете использовать Pascal_Snake_Case для имен ваших классов, запустив Loader::setV2ClassLoading(false);
class MyController {

	public function index() {
		// сделать что-то
	}
}
```

И если вы хотите автоматически загрузить класс в каталоге utils, вы сделали бы практически то же самое:

```php

/**
 * app/UTILS/ArrayHelperUtil.php
 */

// пространство имен должно соответствовать структуре каталога и регистру (обратите внимание на каталог UTILS в верхнем регистре
//     как в дереве файлов выше)
namespace app\UTILS;

class ArrayHelperUtil {

	public function changeArrayCase(array $array) {
		// сделать что-то
	}
}
```

## Подчеркивания в именах классов

Начиная с версии 3.7.2, вы можете использовать Pascal_Snake_Case для имен ваших классов, запустив `Loader::setV2ClassLoading(false);`.
Это позволит вам использовать подчеркивания в именах ваших классов.
Это не рекомендуется, но это доступно для тех, кто нуждается в этом.

```php

/**
 * public/index.php
 */

// Добавить путь к автозагрузчику
Flight::path(__DIR__.'/../app/controllers/');
Flight::path(__DIR__.'/../app/utils/');
Loader::setV2ClassLoading(false);

/**
 * app/controllers/My_Controller.php
 */

// не требуется использование пространства имен

class My_Controller {

	public function index() {
		// сделать что-то
	}
}
```